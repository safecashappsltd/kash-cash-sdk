{"version":3,"file":"index.modern.js","sources":["../src/entities/utils/errorMassages.ts","../src/components/CashButtons/CashiButton.tsx","../node_modules/babel-plugin-transform-async-to-promises/helpers.mjs","../src/entities/index.ts","../src/hooks/usePolling.hook.tsx","../src/hooks/useCreateTransaction.hook.tsx","../src/modals/QRCodeModal.tsx","../src/constants/constants.ts","../src/index.tsx"],"sourcesContent":["const url = 'https://prod-api.safecashapps.com/api/external/v1/'\n\nconst endPoints = {\n  login: 'login',\n  create: 'request/create',\n  cancel: 'request/cancel',\n  generatePaymentCode: 'transactions/generate/code',\n  statusForPOS: 'request/statusForPOSByTransactionId'\n}\n\nenum ErrorResponsesMessage {\n  EMPTY_REQUEST = 'request data are empty',\n  MUST_LOGIN = 'must login first',\n  ZERO_AMOUNT = 'Amount cant be zero or less',\n  EXTERNAL_ID_EMPTY = 'externalId not provided',\n  USERNAME_PASSWORD_EMPTY = 'username or password not provided',\n  BUSINESS_ID_EMPTY = 'businessId not provided'\n}\n\nenum ErrorStatuses {\n  EMPTY,\n  ZERO,\n  NOT_PROVIDED,\n  EXTERNAL\n}\n\nenum Type {\n  WITH_ICON,\n  WITHOUT_ICON\n}\n\nenum Style {\n  BRIGHT,\n  DARK\n}\n\nexport type ICreateResponse = {\n  transactionId: string\n  externalId: string\n  transactionStatus: string\n  createDate: Date\n  qrCodeAsString: string\n  qrCodeAsSvg: string\n}\n\nexport enum TransactionType {\n  DEBIT_TRANSACTION = 101,\n  REFUND_TRANSACTION = 103\n}\n\nexport enum BuyerMethod {\n  BLUETOOTH = 0,\n  QR_CODE = 1,\n  PAY_BY_CODE = 2\n}\n\nexport enum TransactionStatus {\n  PENDING = 0,\n  SUCCESS = 1,\n  CANCELED = 2,\n  REJECTED = 3,\n  REQUESTED = 7,\n  LIMITED = -1\n}\n\nexport type GetTransactionStatus = {\n  transactionId: string\n  originalTransactionId?: string\n  amount: number\n  createdAt: string\n  createdMomentHHmmss: string\n  transactionType: TransactionType\n  transactionStatus?: TransactionStatus\n  branchExternalId: string\n  posId: string\n  genericParams: string\n  externalId: string\n  companyName: string\n  companyBranchName: 'Cafe Roma_Branch'\n  buyerMethod: BuyerMethod\n  refundedAmount: null\n  availbleRefund: null\n}\n\nexport type CancelTransaction = {\n  description: string\n  errorCode: number\n  additionalData: string\n  code: number\n}\n\nexport type ICancelTransactionResponse = {\n  data: CancelTransaction\n  status: number\n}\n\nexport type IGetTransactionStatus = {\n  data: GetTransactionStatus\n  status: number\n}\n\nexport type CreateResponse = {\n  data: ICreateResponse\n  status: number\n}\n\nexport type GenerateCodeResponse = {\n  data: string\n  status: number\n}\n\nexport type LoginResponse = {\n  data: {\n    token: string\n  }\n  status: number\n}\n\nexport type IRequestCreate = {\n  amount: number\n  externalId: string\n  auth: string\n  businessId: string\n  customCreateTransactionFunction?: (\n    amount: number,\n    externalId: string,\n    businessId: string\n  ) => Promise<CreateResponse>\n}\n\nexport type IRequestLogin = {\n  username: string\n  password: string\n  businessId: string\n  posVendorId?: string\n  version?: string\n}\n\nexport type IGenerateCode = {\n  businessId: string\n  transactionId: string\n  auth: string\n}\n\nexport type ITransactionStatus = {\n  businessId: string\n  transactionId: string\n  auth: string\n}\n\nexport type ITransactionCancel = {\n  businessId: string\n  transactionId: string\n  auth: string\n}\n\nexport type IResponse = {\n  data: any\n  status: string\n  errorCode: number\n  message: string\n}\n\nexport type ILoginDataResponse = {\n  blockStatus: number\n  refreshToken: string\n  resetPassword: boolean\n  sessionData: {\n    major: string\n    minor: string\n    token: string\n    userId: string\n  }\n}\n\nconst emptyData = () => {\n  return {\n    message: ErrorResponsesMessage.EMPTY_REQUEST,\n    errorCode: ErrorStatuses.EMPTY,\n    status: ErrorStatuses.EMPTY\n  }\n}\n\nconst amountLessThenZero = () => {\n  return {\n    message: ErrorResponsesMessage.ZERO_AMOUNT,\n    errorCode: ErrorStatuses.ZERO,\n    status: ErrorStatuses.ZERO\n  }\n}\n\nconst externalIdNotProvided = () => {\n  return {\n    message: ErrorResponsesMessage.EXTERNAL_ID_EMPTY,\n    errorCode: ErrorStatuses.NOT_PROVIDED,\n    status: ErrorStatuses.NOT_PROVIDED\n  }\n}\n\nconst mustLoginFirst = () => {\n  return {\n    message: ErrorResponsesMessage.MUST_LOGIN,\n    errorCode: ErrorStatuses.EXTERNAL,\n    status: ErrorStatuses.EXTERNAL\n  }\n}\n\nconst usernameOrPasswordEmpty = () => {\n  return {\n    message: ErrorResponsesMessage.USERNAME_PASSWORD_EMPTY,\n    errorCode: ErrorStatuses.NOT_PROVIDED,\n    status: ErrorStatuses.NOT_PROVIDED\n  }\n}\n\nconst businessIdNotProvided = () => {\n  return {\n    message: ErrorResponsesMessage.BUSINESS_ID_EMPTY,\n    errorCode: ErrorStatuses.NOT_PROVIDED,\n    status: ErrorStatuses.NOT_PROVIDED\n  }\n}\n\nexport {\n  businessIdNotProvided,\n  usernameOrPasswordEmpty,\n  mustLoginFirst,\n  externalIdNotProvided,\n  amountLessThenZero,\n  emptyData,\n  url,\n  endPoints,\n  ErrorResponsesMessage,\n  ErrorStatuses,\n  Style,\n  Type\n}\n","// src/ButtonComponent.tsx\nimport React from 'react'\nimport { IConfig } from '../../types/types'\nimport { Style, Type } from '../../entities/utils/errorMassages'\n\ntype Props = {\n  sdkConfig: IConfig\n  title: string\n  onPress: () => void\n  customButtonStyle?: JSON\n}\n\nconst ButtonComponent: React.FC<Props> = ({\n  title,\n  onPress,\n  customButtonStyle,\n  sdkConfig\n}) => {\n  const { buttonStyle, buttonType } = sdkConfig\n  const color = buttonStyle === Style.BRIGHT\n  const type = buttonType === Type.WITHOUT_ICON\n\n  const styles = {\n    color: color ? 'white' : 'black',\n    backgroundColor: color ? 'orange' : 'white',\n    borderRadius: type ? '8px' : '25px',\n    padding: '10px',\n    fontFamily: 'Sans-Serif'\n  }\n\n  return (\n    <div>\n      <button style={{ ...styles, ...customButtonStyle }} onClick={onPress}>\n        <h3>{title}</h3>\n      </button>\n    </div>\n  )\n}\n\nexport default ButtonComponent\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import axios from 'axios'\nimport {\n  CreateResponse,\n  IRequestCreate,\n  IRequestLogin,\n  amountLessThenZero,\n  businessIdNotProvided,\n  emptyData,\n  endPoints,\n  externalIdNotProvided,\n  mustLoginFirst,\n  url,\n  usernameOrPasswordEmpty,\n  LoginResponse,\n  IGenerateCode,\n  GenerateCodeResponse,\n  ITransactionStatus,\n  IGetTransactionStatus,\n  ITransactionCancel,\n  ICancelTransactionResponse\n  // IResponse\n} from './utils/errorMassages'\n\nconst baseHeaders = {\n  Accept: 'application/json',\n  'Content-Type': 'application/json',\n  'Cache-Control': 'no-cache',\n  Pragma: 'no-cache',\n  Expires: '0'\n}\n\nexport const login = async (req: IRequestLogin) => {\n  const { username, password, businessId } = req\n\n  if (!req) {\n    return emptyData()\n  }\n\n  if (!username || username === '' || !password || password === '') {\n    return usernameOrPasswordEmpty()\n  }\n\n  if (!businessId || businessId === '') {\n    return businessIdNotProvided()\n  }\n\n  try {\n    const response: LoginResponse = await axios.post(\n      `${url}${endPoints.login}`,\n      req\n    )\n    const { status, data } = response\n    return {\n      data,\n      status,\n      errorCode: 200,\n      message: 'Ok'\n    }\n  } catch (error) {\n    return {\n      message: JSON.stringify(error),\n      errorCode: 404,\n      status: 404\n    }\n  }\n}\n\nexport const create = async (req: IRequestCreate) => {\n  try {\n    if (!req) {\n      return emptyData()\n    }\n\n    const { amount, externalId, auth, businessId, customCreateTransactionFunction } = req\n\n    if (!auth) {\n      return mustLoginFirst()\n    }\n\n    if (externalId === '') {\n      return externalIdNotProvided()\n    }\n\n    if (amount <= 0) {\n      return amountLessThenZero()\n    }\n\n    const headers = {\n      ...baseHeaders,\n      \"x-api-key\": auth\n    }\n\n    if(customCreateTransactionFunction) {\n      const response: CreateResponse = await customCreateTransactionFunction(amount, externalId, businessId);\n      const { status, data } = response\n      return {\n        data,\n        status,\n        errorCode: 200,\n        message: 'Ok'\n      }\n    } else {\n      const response: CreateResponse = await axios.post(\n        `${url}${endPoints.create}`,\n        { amount, externalId, businessId },\n        { headers }\n      )\n      const { status, data } = response\n      return {\n        data,\n        status,\n        errorCode: 200,\n        message: 'Ok'\n      }\n    }\n\n  } catch (error) {\n    return {\n      message: JSON.stringify(error),\n      errorCode: 404,\n      status: 404\n    }\n  }\n}\n\nexport const generateManualCode = async (req: IGenerateCode) => {\n  const { auth, transactionId, businessId } = req\n\n  if (!transactionId && transactionId === '') {\n    return {\n      message: 'generateManualCode not transaction id',\n      errorCode: 404,\n      status: 404\n    }\n  }\n\n  const headers = {\n    ...baseHeaders,\n    \"x-api-key\": auth\n  }\n\n  try {\n    const response: GenerateCodeResponse = await axios.post(\n      `${url}${endPoints.generatePaymentCode}`,\n      { transactionId, businessId },\n      { headers }\n    )\n    const { status, data } = response\n    return {\n      data,\n      status,\n      errorCode: 200,\n      message: 'Ok'\n    }\n  } catch (error) {\n    return {\n      message: JSON.stringify(error),\n      errorCode: 404,\n      status: 404\n    }\n  }\n}\n\nexport const getTransactionStatus = async (req: ITransactionStatus) => {\n  const { auth, transactionId, businessId } = req\n\n  if (!transactionId && transactionId === '') {\n    return {\n      message: 'generateManualCode not transaction id',\n      errorCode: 404,\n      status: 404\n    }\n  }\n\n  const headers = {\n    ...baseHeaders,\n    \"x-api-key\": auth\n  }\n\n  try {\n    const response: IGetTransactionStatus = await axios.post(\n      `${url}${endPoints.statusForPOS}`,\n      { transactionId, businessId },\n      { headers }\n    )\n    const { status, data } = response\n    return {\n      data,\n      status,\n      errorCode: 200,\n      message: 'Ok'\n    }\n  } catch (error) {\n    return {\n      message: JSON.stringify(error),\n      errorCode: 404,\n      status: 404\n    }\n  }\n}\n\nexport const cancelTransaction = async (req: ITransactionCancel)=> {\n  const {auth, transactionId, businessId} = req;\n  const headers = {\n    ...baseHeaders,\n    \"x-api-key\": auth\n  }\n\n  try {\n    const response: ICancelTransactionResponse = await axios.post(\n      `${url}${endPoints.cancel}`,\n      { transactionId, businessId },\n      { headers }\n    )\n    const { status, data } = response\n    return {\n      data,\n      status,\n      errorCode: 200,\n      message: 'Ok'\n    }\n  } catch (error) {\n    return {\n      message: JSON.stringify(error),\n      errorCode: 404,\n      status: 404\n    }\n  }\n}\n\n// const makeRequest = async (\n//   url: string,\n//   data: IRequestLogin | IRequestCreate,\n//   request: (\n//     url: string,\n//     data: IRequestCreate | IRequestLogin\n//     )=> Promise<IResponse>)=> {\n//   return await axios.post(url, data);\n// }\n","import { useState } from 'react'\nimport { cancelTransaction, getTransactionStatus } from '../entities'\nimport { TransactionStatus } from '../entities/utils/errorMassages'\n\ninterface IPollingData {\n  businessId: string\n  pollingInterval: number\n  setTransactionStatus?: (status: TransactionStatus) => void\n  closeModal: ()=> void\n}\n\nexport const usePolling = (data: IPollingData) => {\n  const { businessId, pollingInterval, closeModal } = data\n  const [isPollingProcess, setPollingProcess] = useState(false)\n  const [isStatusFinal, setIsStatusFinal] = useState<TransactionStatus>(\n    TransactionStatus.REQUESTED\n  )\n  const [isError, setIsError] = useState(false)\n\n  let interval: NodeJS.Timeout\n  let timeout: NodeJS.Timeout\n\n  const transactionStatusPolling = async (\n    transactionId: string,\n    auth: string\n  ) => {\n    interval = setInterval(async () => {\n      getTransactionStatusUpdate(transactionId, auth)\n    }, pollingInterval)\n\n    timeout = setTimeout(() => {\n      stopInterval();\n      cancelTransaction({businessId, transactionId, auth})\n    }, 60000)\n  }\n\n  const getTransactionStatusUpdate = async (transactionId: string, auth: string)=> {\n    const res = await getTransaction(transactionId, auth)\n      setIsStatusFinal((prevState: TransactionStatus | any) => {\n        if (prevState === res) {\n          return prevState\n        } else {\n          return res\n        }\n      })\n  }\n\n  const getTransaction = async (transactionId: string, auth: string) => {\n    let transactionStatus = TransactionStatus.REQUESTED\n    try {\n      setPollingProcess(true)\n      const response = await getTransactionStatus({\n        businessId,\n        transactionId,\n        auth\n      })\n\n      if (response.errorCode !== 200) {\n        stopInterval()\n        setIsStatusFinal(0)\n        transactionStatus = TransactionStatus.REQUESTED\n        setIsError(true)\n        return\n      }\n\n      switch (response.data?.transactionStatus) {\n        case TransactionStatus.CANCELED:\n        case TransactionStatus.REJECTED:\n        case TransactionStatus.SUCCESS:\n        case TransactionStatus.LIMITED:\n          stopInterval()\n          transactionStatus = response.data.transactionStatus\n          setIsError(true)\n          break\n        case TransactionStatus.PENDING:\n        case TransactionStatus.REQUESTED:\n          transactionStatus = response.data.transactionStatus\n          break\n      }\n    } catch (error) {\n      transactionStatus = TransactionStatus.CANCELED\n      cancelTransaction({businessId, transactionId, auth})\n      closeModal()\n      setPollingProcess(false)\n      setIsError(true)\n    }\n\n    return transactionStatus\n  }\n\n  const stopInterval = () => {\n    closeModal()\n    clearTimeout(timeout)\n    clearInterval(interval)\n    setPollingProcess(false)\n  }\n\n  return {\n    isError,\n    isStatusFinal,\n    isPollingProcess,\n    stopInterval,\n    transactionStatusPolling\n  }\n}\n","import { useState } from 'react'\nimport { create, generateManualCode } from '../entities'\nimport { IConfig, IOnErrorEvent, IOnSuccessEvent } from '../types/types'\nimport { usePolling } from './usePolling.hook'\n\nexport const useCreateTransaction = (\n  sdkConfig: IConfig,\n  externalId: string,\n  amount: number,\n  onSuccess: (event: IOnSuccessEvent) => void,\n  onError: (event: IOnErrorEvent) => void,\n  returnUrl: string\n) => {\n  const [isModalShow, setIsModalShow] = useState<boolean>(false)\n  const [isProcessing, setIsProcessing] = useState<boolean>(false)\n  const [qrCode, setQrCode] = useState<string>('')\n  const [manualCode, setManualCode] = useState<string>('')\n  const [transactionId, setTransactionId] = useState<string>('')\n\n  const showModal = () => {\n    setIsModalShow(true)\n  }\n\n  const closeModal = () => {\n    setIsModalShow(false)\n  }\n\n  const { isStatusFinal, transactionStatusPolling, stopInterval } = usePolling({\n    businessId: sdkConfig.businessId,\n    pollingInterval: sdkConfig.pollingInterval,\n    closeModal\n  })\n\n  const openAppWithCashierClient = (requestId: string) => {\n    const appSchema = `cashiclient://payByIntent?requestId=${requestId}&schemaUrl=${returnUrl}`\n    if (window.location && window.location.assign) {\n      window.location.assign(appSchema)\n    } else {\n      window.location.href = appSchema\n    }\n  }\n\n  const createTransaction = async () => {\n    setIsProcessing(true)\n    const response = await create({\n      externalId,\n      amount,\n      auth: sdkConfig.merchantToken,\n      businessId: sdkConfig.businessId,\n      customCreateTransactionFunction: sdkConfig.customCreateTransactionFunction\n    })\n    if (response.status === 200 && response.data) {\n      openAppWithCashierClient(response.data.transactionId)\n      setQrCode(response.data.qrCodeAsString)\n      setTransactionId(response.data.transactionId)\n      const manualCodeResponse = await generateManualCode({\n        auth: sdkConfig.merchantToken,\n        transactionId: response.data.transactionId,\n        businessId: sdkConfig.businessId\n      })\n      setManualCode(manualCodeResponse?.data!)\n      showModal()\n      onSuccess(response)\n      transactionStatusPolling(response.data.transactionId, sdkConfig.merchantToken)\n      setIsProcessing(false)\n    } else {\n      onError(response)\n      setIsProcessing(false)\n    }\n  }\n\n  return {\n    createTransaction,\n    showModal,\n    closeModal,\n    stopInterval,\n    transactionId,\n    isModalShow,\n    isProcessing,\n    qrCode,\n    manualCode,\n    isStatusFinal\n  }\n}\n","// src/QRCodeModal.tsx\nimport React from 'react'\nimport Modal from 'react-modal'\nimport QRCode from 'react-qr-code'\nimport { IModalProps } from '../types/types'\n\nexport const QRCodeModal: React.FC<IModalProps> = (props) => {\n  const { isModalShow, closeModal, qrValue, manualCode } = props\n\n  return (\n    <div>\n      <Modal\n        isOpen={isModalShow}\n        onAfterOpen={() => {}}\n        onRequestClose={closeModal}\n        style={customStyles}\n        contentLabel='Payment'\n      >\n        <div style={{ background: 'white', padding: '16px', borderRadius: 10 }}>\n          <button\n            onClick={closeModal}\n            style={{\n              position: 'absolute',\n              right: 10,\n              top: 10,\n              borderWidth: 0,\n              backgroundColor: 'transparent'\n            }}\n          >\n            <text style={{ fontSize: 18, fontWeight: 'bolder' }}>X</text>\n          </button>\n          <QRCode value={qrValue} />\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              padding: '16px'\n            }}\n          >\n            <text style={{ fontSize: 22, fontWeight: 'bold' }}>\n              {'Code: ' + manualCode}\n            </text>\n          </div>\n        </div>\n      </Modal>\n    </div>\n  )\n}\n\nconst customStyles = {\n  content: {\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)',\n    zIndex: 999\n  }\n}\n\nexport default QRCodeModal\n","export const DEFAULT_POLLING_INTERVAL: number = 5000;\nexport const EMPTY_STRING: string = '';\nexport const PROCESSING: string = 'בתהליך...';\n","import * as React from 'react'\nimport ButtonComponent from './components/CashButtons/CashiButton'\nimport { useCreateTransaction } from './hooks/useCreateTransaction.hook'\nimport { IButtonProps, IConfig } from './types/types'\nimport { Style, TransactionStatus, Type } from './entities/utils/errorMassages'\nimport QRCodeModal from './modals/QRCodeModal'\nimport {\n  DEFAULT_POLLING_INTERVAL,\n  EMPTY_STRING,\n  PROCESSING\n} from './constants/constants'\nimport { cancelTransaction } from './entities'\n\nconst sdkConfig: IConfig = {\n  username: EMPTY_STRING,\n  password: EMPTY_STRING,\n  businessId: EMPTY_STRING,\n  posVendorId: undefined,\n  version: undefined,\n  pollingInterval: DEFAULT_POLLING_INTERVAL,\n  merchantToken: EMPTY_STRING,\n  customCreateTransactionFunction: undefined,\n  buttonType: Type.WITH_ICON,\n  buttonStyle: Style.BRIGHT\n}\n\nconst KashCashInit = (config: IConfig) => {\n  const {\n    username,\n    password,\n    businessId,\n    posVendorId,\n    version,\n    pollingInterval,\n    merchantToken,\n    customCreateTransactionFunction,\n    buttonStyle,\n    buttonType\n  } = config\n  sdkConfig.username = username\n  sdkConfig.password = password\n  sdkConfig.businessId = businessId\n  sdkConfig.posVendorId = posVendorId\n  sdkConfig.version = version\n  sdkConfig.pollingInterval = pollingInterval\n  sdkConfig.merchantToken = merchantToken\n  sdkConfig.customCreateTransactionFunction = customCreateTransactionFunction\n  sdkConfig.buttonStyle = buttonStyle\n  sdkConfig.buttonType = buttonType\n}\n\nconst KashCashPay: React.FC<IButtonProps> = ({\n  customButtonStyle,\n  externalId,\n  onSuccess,\n  onError,\n  amount,\n  returnUrl,\n  onTransactionStatus\n}) => {\n  const {\n    createTransaction,\n    closeModal,\n    stopInterval,\n    isModalShow,\n    isProcessing,\n    qrCode,\n    manualCode,\n    transactionId,\n    isStatusFinal\n  } = useCreateTransaction(\n    sdkConfig,\n    externalId,\n    amount,\n    onSuccess,\n    onError,\n    returnUrl\n  )\n\n  const manualCloseModal = () => {\n    closeModal()\n    cancelTransaction({\n      transactionId,\n      auth: sdkConfig.merchantToken,\n      businessId: sdkConfig.businessId\n    })\n  }\n\n  React.useEffect(() => {\n    switch (isStatusFinal) {\n      case TransactionStatus.CANCELED:\n        manualCloseModal()\n      // eslint-disable-next-line no-fallthrough\n      case TransactionStatus.LIMITED:\n      case TransactionStatus.REJECTED:\n        closeModal()\n        stopInterval()\n        break\n      case TransactionStatus.SUCCESS:\n        closeModal()\n        break\n      case TransactionStatus.PENDING:\n      case TransactionStatus.REQUESTED:\n      default:\n        break\n    }\n    onTransactionStatus(isStatusFinal)\n    return () => {\n      cancelTransaction({\n        transactionId,\n        auth: sdkConfig.merchantToken,\n        businessId: sdkConfig.businessId\n      })\n    }\n  }, [isStatusFinal])\n\n  return (\n    <div>\n      <ButtonComponent\n        sdkConfig={sdkConfig}\n        title={isProcessing ? PROCESSING : 'תשלום בקשקאש'}\n        onPress={createTransaction}\n        customButtonStyle={customButtonStyle}\n      />\n      <QRCodeModal\n        manualCode={manualCode}\n        qrValue={qrCode}\n        isModalShow={isModalShow}\n        closeModal={manualCloseModal}\n      />\n    </div>\n  )\n}\n\nexport { KashCashInit, IButtonProps, IConfig, Type, Style }\nexport default KashCashPay\n"],"names":["url","endPoints","login","create","cancel","generatePaymentCode","statusForPOS","ErrorResponsesMessage","ErrorStatuses","Type","Style","TransactionType","BuyerMethod","TransactionStatus","emptyData","message","EMPTY_REQUEST","errorCode","EMPTY","status","amountLessThenZero","ZERO_AMOUNT","ZERO","externalIdNotProvided","EXTERNAL_ID_EMPTY","NOT_PROVIDED","mustLoginFirst","MUST_LOGIN","EXTERNAL","ButtonComponent","_ref","title","onPress","customButtonStyle","sdkConfig","buttonStyle","buttonType","color","BRIGHT","type","WITHOUT_ICON","styles","backgroundColor","borderRadius","padding","fontFamily","React","style","_extends","onClick","baseHeaders","Accept","Pragma","Expires","req","amount","externalId","auth","businessId","customCreateTransactionFunction","headers","Promise","resolve","then","response","data","axios","post","error","JSON","stringify","e","reject","generateManualCode","transactionId","_catch","getTransactionStatus","cancelTransaction","usePolling","pollingInterval","closeModal","_useState","useState","isPollingProcess","setPollingProcess","_useState2","REQUESTED","isStatusFinal","setIsStatusFinal","_useState3","isError","setIsError","interval","timeout","transactionStatusPolling","setInterval","getTransactionStatusUpdate","setTimeout","stopInterval","getTransaction","res","prevState","transactionStatus","_temp","_response$data","_exit","CANCELED","REJECTED","SUCCESS","LIMITED","PENDING","_result","clearTimeout","clearInterval","useCreateTransaction","onSuccess","onError","returnUrl","isModalShow","setIsModalShow","isProcessing","setIsProcessing","qrCode","setQrCode","_useState4","manualCode","setManualCode","_useState5","setTransactionId","showModal","_usePolling","openAppWithCashierClient","requestId","appSchema","window","location","assign","href","createTransaction","merchantToken","qrCodeAsString","manualCodeResponse","QRCodeModal","props","qrValue","Modal","isOpen","onAfterOpen","onRequestClose","customStyles","contentLabel","background","position","right","top","borderWidth","fontSize","fontWeight","QRCode","value","display","justifyContent","alignItems","content","left","bottom","marginRight","transform","zIndex","DEFAULT_POLLING_INTERVAL","EMPTY_STRING","PROCESSING","username","password","posVendorId","undefined","version","WITH_ICON","KashCashInit","config","KashCashPay","onTransactionStatus","_useCreateTransaction","manualCloseModal"],"mappings":"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"}